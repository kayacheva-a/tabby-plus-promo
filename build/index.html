<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tabby+ Project Plan</title>
    <style>
        :root {
            --tabby-primary: #8B5CF6;
            --tabby-violet-dark: #7C3AED;
            --tabby-pink-light: #F472B6;
            --tabby-purple: #A855F7;
            --tabby-dark: #1F2937;
            --tabby-gray: #6B7280;
            --tabby-light-gray: #E5E7EB;
            --tabby-bg-white: #FFFFFF;
            --tabby-bg-cream: #FEFEFE;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--tabby-bg-cream);
            color: var(--tabby-dark);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Header with Tabs */
        .header {
            background: var(--tabby-bg-white);
            border-bottom: 1px solid var(--tabby-light-gray);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 0;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--tabby-violet-dark);
        }

        .nav-menu {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .nav-links {
            display: flex;
            gap: 0;
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .nav-item {
            position: relative;
        }

        .nav-link {
            background: transparent;
            border: none;
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            font-weight: 600;
            color: var(--tabby-gray);
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
            display: block;
        }

        .nav-link:hover {
            color: var(--tabby-dark);
        }

        .nav-link.active {
            color: var(--tabby-violet-dark);
        }

        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: -1rem;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 3px;
            background: var(--tabby-violet-dark);
            border-radius: 2px;
        }

        /* Main Content */
        .main-content {
            margin-top: 80px;
            min-height: calc(100vh - 80px);
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, var(--tabby-violet-dark) 0%, var(--tabby-pink-light) 50%, var(--tabby-purple) 100%);
            min-height: 50vh;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            border-bottom-left-radius: 50px;
            border-bottom-right-radius: 50px;
            margin-bottom: 2rem;
            padding: 4rem 0;
        }

        .hero-content {
            width: 100%;
            padding: 2rem 0;
        }

        .hero-text {
            max-width: 600px;
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: 800;
            color: white;
            margin-bottom: 1.5rem;
            line-height: 1.1;
        }

        .hero-subtitle {
            font-size: 1.25rem;
            color: white;
            margin-bottom: 2.5rem;
            line-height: 1.6;
            opacity: 0.95;
        }

        .hero-cta {
            display: flex;
            gap: 1rem;
        }

        .btn-primary {
            background: white;
            color: var(--tabby-violet-dark);
            padding: 1rem 2rem;
            border-radius: 12px;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        /* Comparison Section */
        .comparison-section {
            background: var(--tabby-bg-cream);
            padding: 6rem 0;
        }

        .toggle-container {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
        }

        .hide-toggle-btn {
            background: var(--tabby-violet);
            border: none;
            border-radius: 30px;
            padding: 15px 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
            min-width: 200px;
            color: white;
        }

        .hide-toggle-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4);
        }

        .eye-icon {
            font-size: 24px;
            transition: all 0.3s ease;
        }

        .eye-icon.closed {
            opacity: 0.7;
        }

        .eye-icon.open {
            opacity: 1;
        }

        .button-text {
            color: rgba(255, 255, 255, 0.3) !important;
            font-weight: 600;
            font-size: 16px;
            white-space: nowrap;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        .comparison-table {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        }

        .hidden-row {
            display: none !important;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: var(--tabby-bg-white);
            padding: 1.5rem;
            text-align: left;
            font-weight: 700;
            color: var(--tabby-dark);
            border-bottom: 2px solid var(--tabby-light-gray);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        th:nth-child(2) {
            background: var(--tabby-gray);
            color: white;
        }

        th:nth-child(3) {
            background: var(--tabby-violet-dark);
            color: white;
        }

        td {
            padding: 1.5rem;
            border-bottom: 1px solid var(--tabby-light-gray);
            vertical-align: top;
        }

        .feature-category {
            font-weight: 600;
            color: var(--tabby-dark);
        }

        .feature-name {
            font-weight: 600;
            color: var(--tabby-dark);
            margin-bottom: 0.25rem;
        }

        .feature-subline {
            font-size: 0.85rem;
            color: var(--tabby-gray);
            font-weight: 400;
            font-style: italic;
        }

        .feature-free {
            color: var(--tabby-dark);
        }

        .feature-premium {
            color: var(--tabby-dark);
        }

        .highlight {
            background: linear-gradient(135deg, var(--tabby-violet-dark), var(--tabby-pink-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 600;
        }

        .free-text {
            color: #00A645;
            font-weight: 600;
        }

        .paid-text {
            color: #DC2626;
            font-weight: 600;
        }
        
        .basic-text {
            color: #EA580C;
            font-weight: 600;
        }
        
        .not-available-text {
            color: #EA580C;
            font-weight: 600;
        }

        .cell-with-modal {
            animation: pulseGradient 3s ease-in-out infinite;
            position: relative;
        }

        .cell-with-modal::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(244, 114, 182, 0.1));
            border-radius: 8px;
            z-index: -1;
        }

        @keyframes pulseGradient {
            0%, 100% { background: rgba(139, 92, 246, 0.05); }
            50% { background: rgba(139, 92, 246, 0.15); }
        }

        /* Column Selection */
        .comparison-table.free-selected .feature-free {
            background: rgba(248, 250, 252, 0.5);
            color: var(--tabby-dark);
            position: relative;
        }

        .comparison-table.free-selected .feature-free::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(135deg, var(--tabby-light-gray), var(--tabby-gray));
            border-radius: 8px;
            z-index: -1;
        }

        .comparison-table.plus-selected .feature-premium {
            background: rgba(139, 92, 246, 0.1);
            color: var(--tabby-dark);
            position: relative;
        }

        .comparison-table.plus-selected .feature-premium::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(135deg, var(--tabby-violet-dark), var(--tabby-pink-light));
            border-radius: 8px;
            z-index: -1;
        }

        /* Description Content */
        .description-content {
            background: var(--tabby-bg-white);
            padding: 3rem 0;
            min-height: calc(100vh - 80px);
        }

        .description-text {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            font-size: 1rem;
            line-height: 1.8;
            color: var(--tabby-dark);
            white-space: pre-line;
            overflow-x: auto;
        }

        .wiki-content {
            line-height: 1.8;
            color: var(--tabby-dark);
            font-size: 1rem;
        }

        .wiki-content h1 {
            color: var(--tabby-violet-dark);
            font-size: 2.5rem;
            font-weight: 700;
            margin: 2rem 0 1.5rem 0;
            text-align: center;
        }

        .wiki-content h2 {
            color: var(--tabby-violet-dark);
            font-size: 1.8rem;
            font-weight: 600;
            margin: 2rem 0 1rem 0;
            border-bottom: 2px solid var(--tabby-violet-light);
            padding-bottom: 0.5rem;
        }

        .wiki-content h3 {
            color: var(--tabby-violet-dark);
            font-size: 1.4rem;
            font-weight: 600;
            margin: 1.5rem 0 0.75rem 0;
        }

        .wiki-content h4 {
            color: var(--tabby-dark);
            font-size: 1.2rem;
            font-weight: 600;
            margin: 1.25rem 0 0.5rem 0;
        }

        .wiki-content ul {
            margin: 1rem 0;
            padding-left: 1.5rem;
        }

        .wiki-content li {
            margin: 0.5rem 0;
            color: var(--tabby-dark);
        }

        .wiki-content .feature-item {
            margin: 0.75rem 0;
            padding: 0.5rem 0;
            border-left: 3px solid var(--tabby-violet-light);
            padding-left: 1rem;
        }

        .wiki-content .feature-available {
            color: var(--tabby-green);
            font-weight: 500;
        }

        .wiki-content .feature-unavailable {
            color: var(--tabby-red);
            font-weight: 500;
        }

        .wiki-content .highlight-section {
            background: var(--tabby-bg-cream);
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1.5rem 0;
            border-left: 4px solid var(--tabby-violet-dark);
        }

        .wiki-content .plan-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 2rem 0;
        }

        .wiki-content .plan-box {
            background: var(--tabby-bg-cream);
            padding: 1.5rem;
            border-radius: 10px;
            border: 2px solid var(--tabby-light-gray);
        }

        .wiki-content .plan-box.free-plan {
            border-color: var(--tabby-green);
        }

        .wiki-content .plan-box.plus-plan {
            border-color: var(--tabby-violet-dark);
        }

        .wiki-content .plan-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 1rem;
            text-align: center;
        }

        .wiki-content .plan-title.free {
            color: var(--tabby-green);
        }

        .wiki-content .plan-title.plus {
            color: var(--tabby-violet-dark);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: transparent;
        }

        .modal-content {
            position: absolute;
            background-color: white;
            width: 800px;
            max-width: 90vw;
            border-radius: 15px;
            border: 1px solid var(--tabby-light-gray);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            --arrow-top: 50px;
        }

        .modal-content::before {
            content: '';
            position: absolute;
            right: -20px;
            top: var(--arrow-top);
            width: 0;
            height: 0;
            border-left: 20px solid white;
            border-top: 15px solid transparent;
            border-bottom: 15px solid transparent;
        }

        .modal-content::after {
            content: '';
            position: absolute;
            right: -21px;
            top: var(--arrow-top);
            width: 0;
            height: 0;
            border-left: 21px solid var(--tabby-light-gray);
            border-top: 16px solid transparent;
            border-bottom: 16px solid transparent;
        }

        .modal-header {
            background: var(--tabby-bg-cream);
            color: var(--tabby-dark);
            padding: 1.5rem;
            border-bottom: 1px solid var(--tabby-light-gray);
            border-radius: 15px 15px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
        }

        .modal-header h3 {
            margin: 0;
            font-size: 1.25rem;
            font-weight: 700;
            flex: 1;
        }

        .close {
            color: var(--tabby-gray);
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
            margin-left: auto;
        }

        .close:hover {
            color: var(--tabby-dark);
        }

        .modal-body {
            padding: 2rem;
            max-height: 60vh;
            overflow-y: auto;
        }

        .modal-section {
            margin-bottom: 1.5rem;
        }

        .section-title {
            color: var(--tabby-violet-dark);
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
        }

        .section-content {
            color: var(--tabby-dark);
            line-height: 1.6;
            margin-bottom: 0.5rem;
        }

        .feature-list {
            list-style: none;
            padding: 0;
        }

        .feature-item {
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
            color: var(--tabby-dark);
            line-height: 1.5;
        }

        .highlight-text {
            font-weight: 600;
            color: var(--tabby-violet-dark);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem;
            }
            
            .hero-subtitle {
                font-size: 1.1rem;
            }
            
            .container {
                padding: 0 1rem;
            }
            
            th, td {
                padding: 1rem;
            }
            
            .modal-content {
                width: 95vw;
                margin: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header with Tabs -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">Tabby+ Project Plan</div>
                <nav class="nav-menu">
                    <ul class="nav-links">
                        <li class="nav-item">
                            <a href="#" class="nav-link active" data-page="promo">Promo</a>
                        </li>
                        <li class="nav-item">
                            <a href="wiki.html" class="nav-link">Wiki</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Promo Page -->
        <div class="page active" id="promo-page">
            <!-- Hero Section -->
            <section class="hero">
                <div class="container">
                    <div class="hero-content">
                        <div class="hero-text">
                            <h1 class="hero-title">Best of Tabby with Tabby+</h1>
                            <p class="hero-subtitle">Get the best of our rewards, debt management features, unlock expense tracking tools and paint your Tabby Card in violet.</p>
                            <div class="hero-cta">
                                <a href="#compare" class="btn-primary">Compare Plans</a>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Comparison Table -->
            <section class="comparison-section" id="compare">
                <div class="container">
                    <div class="toggle-container">
                        <button id="hideToggleBtn" class="hide-toggle-btn">
                            <span class="eye-icon closed">üëÅÔ∏è</span>
                            <span class="button-text">I see you, Vita</span>
                        </button>
                    </div>
                    <div class="comparison-table" id="comparisonTable">
                        <table>
                            <thead>
                                <tr>
                                    <th style="width: 25%;">Features</th>
                                    <th style="width: 30%;">Free Plan</th>
                                    <th style="width: 30%;">Tabby+ (AED 49/month)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="3" style="background: #f8f9fa; font-weight: 700; color: var(--tabby-dark); padding: 1rem;">Instalment Plans</td>
                                </tr>
                                <tr>
                                    <td class="feature-category">
                                        <div class="feature-name">Split in 4 in partner stores</div>
                                        <div class="feature-subline">Tabby checkout & Tabby Card</div>
                                    </td>
                                    <td class="feature-free"><span class="free-text">Free ‚úì</span></td>
                                    <td class="feature-premium"><span class="free-text">Free ‚úì</span></td>
                                </tr>
                                <tr>
                                    <td class="feature-category">
                                        <div class="feature-name">Split in 4 in non-partner stores</div>
                                        <div class="feature-subline">Tabby Card</div>
                                    </td>
                                    <td class="feature-free"><span class="paid-text">Paid ‚úó</span></td>
                                    <td class="feature-premium cell-with-modal"><span class="highlight">Free (up to 5000 AED/month)</span></td>
                                </tr>
                                <tr>
                                    <td class="feature-category">
                                        <div class="feature-name">Split in 6 anywhere</div>
                                        <div class="feature-subline">Tabby checkout and in-app & Tabby Card</div>
                                    </td>
                                    <td class="feature-free"><span class="paid-text">Paid ‚úó</span></td>
                                    <td class="feature-premium cell-with-modal"><span class="highlight">One "Split in 6" for free at a time</span></td>
                                </tr>
                                
                                <tr>
                                    <td colspan="3" style="background: #f8f9fa; font-weight: 700; color: var(--tabby-dark); padding: 1rem;">Rewards</td>
                                </tr>
                                <tr>
                                    <td class="feature-category">
                                        <div class="feature-name">Cashback Categories Tabby Card</div>
                                        <div class="feature-subline">Tabby Card</div>
                                    </td>
                                    <td class="feature-free"><span class="not-available-text">Not available</span></td>
                                    <td class="feature-premium"><span class="highlight">Pick 3 categories ‚Üí 5% cashback</span></td>
                                </tr>
                                <tr>
                                    <td class="feature-category">
                                        <div class="feature-name">Cashback Categories BNPL</div>
                                        <div class="feature-subline">Tabby checkout</div>
                                    </td>
                                    <td class="feature-free"><span class="not-available-text">Not available</span></td>
                                    <td class="feature-premium"><span class="highlight">Tabby Card categories applied ‚Üí 5% cashback</span></td>
                                </tr>
                                <tr class="hidden-row">
                                    <td class="feature-category">
                                        <div class="feature-name">Sales Events Access</div>
                                        <div class="feature-subline">Tabby Day & Black Friday</div>
                                    </td>
                                    <td class="feature-free">Standard access</td>
                                    <td class="feature-premium"><span class="highlight">Early access</span></td>
                                </tr>
                                <tr class="hidden-row">
                                    <td class="feature-category">
                                        <div class="feature-name">Exclusive deals</div>
                                        <div class="feature-subline">Tabby checkout & Tabby Card</div>
                                    </td>
                                    <td class="feature-free"><span class="basic-text">Basic</span></td>
                                    <td class="feature-premium"><span class="highlight">Full access</span></td>
                                </tr>
                                
                                <tr>
                                    <td colspan="3" style="background: #f8f9fa; font-weight: 700; color: var(--tabby-dark); padding: 1rem;">Advanced debt management tools</td>
                                </tr>
                                <tr>
                                    <td class="feature-category">
                                        <div class="feature-name">Full Snooze</div>
                                        <div class="feature-subline">Tabby checkout</div>
                                    </td>
                                    <td class="feature-free">Snooze 1 instalment</td>
                                    <td class="feature-premium cell-with-modal"><span class="highlight">Snooze all instalments for the same fee</span></td>
                                </tr>
                                <tr>
                                    <td class="feature-category">
                                        <div class="feature-name">Due Date Changes</div>
                                        <div class="feature-subline">Tabby Card</div>
                                    </td>
                                    <td class="feature-free"><span class="not-available-text">Not available</span></td>
                                    <td class="feature-premium cell-with-modal"><span class="highlight">Once a year</span></td>
                                </tr>
                                <tr class="hidden-row">
                                    <td class="feature-category">
                                        <div class="feature-name">Credit Score Reports</div>
                                    </td>
                                    <td class="feature-free"><span class="not-available-text">Not available</span></td>
                                    <td class="feature-premium cell-with-modal"><span class="highlight">Advanced insights</span></td>
                                </tr>
                                
                                <tr>
                                    <td colspan="3" style="background: #f8f9fa; font-weight: 700; color: var(--tabby-dark); padding: 1rem;">Delights</td>
                                </tr>
                                <tr>
                                    <td class="feature-category">
                                        <div class="feature-name">Card Design</div>
                                        <div class="feature-subline">Tabby Card</div>
                                    </td>
                                    <td class="feature-free"><span class="basic-text">Basic</span></td>
                                    <td class="feature-premium"><span class="highlight">Exclusive design</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </div>

        <!-- Description Page -->
        <div class="page" id="description-page">
            <div class="description-content">
                <div class="container">
                    <div class="wiki-content">
                        <h1>Tabby Plans Comparison</h1>
                        
                        <h2>Overview</h2>
                        <p>Tabby offers two distinct plans to meet different customer needs: a comprehensive Free Plan and an enhanced Tabby+ subscription plan at AED 49/month. Both plans provide core Tabby functionality while Tabby+ unlocks advanced features for power users.</p>

                        <div class="plan-comparison">
                            <div class="plan-box free-plan">
                                <h3 class="plan-title free">Free Plan</h3>
                                
                                <h4>Instalment Plans</h4>
                                <div class="feature-item">
                                    <span class="feature-available">‚úì</span> Split in 4 in partner stores (Tabby checkout & Tabby Card)
                                </div>
                                <div class="feature-item">
                                    <span class="feature-available">‚úì</span> Split in 4 in partner stores (Tabby checkout & Tabby Card)
                                </div>
                                <div class="feature-item">
                                    <span class="feature-unavailable">‚úó</span> Split in 4 in non-partner stores (Paid - Tabby Card)
                                </div>
                                <div class="feature-item">
                                    <span class="feature-unavailable">‚úó</span> Split in 6 anywhere (Paid)
                                </div>

                                <h4>Rewards</h4>
                                <div class="feature-item">
                                    <span class="feature-unavailable">‚úó</span> Cashback Categories Tabby Card (Not available)
                                </div>
                                <div class="feature-item">
                                    <span class="feature-unavailable">‚úó</span> Cashback Categories BNPL (Not available)
                                </div>
                                <div class="feature-item">
                                    <span class="feature-available">‚úì</span> Sales Events Access (Standard access - Tabby Day & Black Friday)
                                </div>
                                <div class="feature-item">
                                    <span class="feature-available">‚úì</span> Exclusive deals (Basic - Tabby checkout & Tabby Card)
                                </div>

                                <h4>Advanced Debt Management Tools</h4>
                                <div class="feature-item">
                                    <span class="feature-available">‚úì</span> Full Snooze (Snooze 1 instalment - Tabby checkout)
                                </div>
                                <div class="feature-item">
                                    <span class="feature-unavailable">‚úó</span> Due Date Changes (Not available - Tabby Card)
                                </div>
                                <div class="feature-item">
                                    <span class="feature-unavailable">‚úó</span> Credit Score Reports (Not available)
                                </div>

                                <h4>Delights</h4>
                                <div class="feature-item">
                                    <span class="feature-available">‚úì</span> Card Design (Basic - Tabby Card)
                                </div>
                            </div>

                            <div class="plan-box plus-plan">
                                <h3 class="plan-title plus">Tabby+ Plan (AED 49/month)</h3>
                                
                                <h4>Instalment Plans</h4>
                                <div class="feature-item">
                                    <span class="feature-available">‚úì</span> Split in 4 in partner stores (Free - Tabby checkout & Tabby Card)
                                </div>
                                <div class="feature-item">
                                    <span class="feature-available">‚úì</span> Split in 4 in partner stores (Free - Tabby checkout & Tabby Card)
                                </div>
                                <div class="feature-item">
                                    <span class="feature-available">‚úì</span> Split in 4 in non-partner stores (Free up to 5000 AED/month - Tabby Card)
                                </div>
                                <div class="feature-item">
                                    <span class="feature-available">‚úì</span> Split in 6 anywhere (One "Split in 6" for free at a time)
                                </div>

                                <h4>Rewards</h4>
                                <div class="feature-item">
                                    <span class="feature-available">‚úì</span> Cashback Categories Tabby Card (Pick 3 categories ‚Üí 5% cashback)
                                </div>
                                <div class="feature-item">
                                    <span class="feature-available">‚úì</span> Cashback Categories BNPL (Tabby Card categories applied ‚Üí 5% cashback)
                                </div>
                                <div class="feature-item">
                                    <span class="feature-available">‚úì</span> Sales Events Access (Early access - Tabby Day & Black Friday)
                                </div>
                                <div class="feature-item">
                                    <span class="feature-available">‚úì</span> Exclusive deals (Full access - Tabby checkout & Tabby Card)
                                </div>

                                <h4>Advanced Debt Management Tools</h4>
                                <div class="feature-item">
                                    <span class="feature-available">‚úì</span> Full Snooze (Snooze all instalments for the same fee - Tabby checkout)
                                </div>
                                <div class="feature-item">
                                    <span class="feature-available">‚úì</span> Due Date Changes (Once a year - Tabby Card)
                                </div>
                                <div class="feature-item">
                                    <span class="feature-available">‚úì</span> Credit Score Reports (Advanced insights)
                                </div>

                                <h4>Delights</h4>
                                <div class="feature-item">
                                    <span class="feature-available">‚úì</span> Card Design (Exclusive design - Tabby Card)
                                </div>
                            </div>
                        </div>

                        <h2>Key Differences Summary</h2>
                        
                        <div class="highlight-section">
                            <h3>Free Plan Limitations</h3>
                            <ul>
                                <li>Limited to Split in 4 at partner stores only</li>
                                <li>No cashback rewards</li>
                                <li>Basic snooze functionality (1 instalment only)</li>
                                <li>No due date flexibility</li>
                                <li>No credit score insights</li>
                                <li>Standard card design</li>
                            </ul>
                        </div>

                        <div class="highlight-section">
                            <h3>Tabby+ Advantages</h3>
                            <ul>
                                <li>Split in 4 anywhere (up to AED 5,000/month free)</li>
                                <li>One free Split in 6 transaction at a time</li>
                                <li>5% cashback on selected categories</li>
                                <li>Early access to sales events</li>
                                <li>Unlimited snooze on all instalments</li>
                                <li>Annual due date changes</li>
                                <li>Advanced credit score reports with detailed insights</li>
                                <li>Exclusive card design</li>
                            </ul>
                        </div>

                        <h2>Feature Details</h2>
                        
                        <h3>Split in 4 Non-Partner Stores (Tabby+ Exclusive)</h3>
                        <div class="highlight-section">
                            <p><strong>Past Benefit:</strong> Tabby+ allowed OL and CL transactions to be rolled over at 25% repayment with no fee (no limit).</p>
                            
                            <p><strong>New Design:</strong></p>
                            <ul>
                                <li>Free rollover on CL: 25% repayment, no cap</li>
                                <li>Free rollover on OL: 25% repayment capped to AED 5,000 per month</li>
                                <li>Beyond that, OL purchases require full repayment to avoid fees</li>
                            </ul>
                            
                            <p><strong>Why:</strong> Controls cost risk while preserving value.</p>
                        </div>

                        <h3>Split in 6 Anywhere (Tabby+ Exclusive)</h3>
                        <div class="highlight-section">
                            <p><strong>What:</strong> One "Split in 6" transaction at 0% fee, valid in BNPL checkout or post-purchase (BNPL or Card).</p>
                            
                            <p><strong>Mechanic:</strong></p>
                            <ul>
                                <li>Only one Free-6 active at a time</li>
                                <li>Free-6 resets after repayment (early repayment allowed)</li>
                            </ul>
                            
                            <p><strong>Why:</strong> Drives engagement with long-term financing.</p>
                        </div>

                        <h3>Full Snooze Upgrade (Tabby+ Exclusive)</h3>
                        <div class="highlight-section">
                            <p><strong>What:</strong> Upgrade snooze ‚Üí Instead of postponing only the next instalment let users snooze all active instalments of the purchase for the same fee.</p>
                            
                            <p><strong>Mechanic:</strong></p>
                            <ul>
                                <li>One active snooze per purchase</li>
                                <li>Reset/re-eligible after entire purchase is repaid</li>
                            </ul>
                            
                            <p><strong>Why:</strong> Creates flexible repayment benefit ‚Üí unique selling point for BNPL.</p>
                        </div>

                        <h3>Due Date Changes (Tabby+ Exclusive)</h3>
                        <div class="highlight-section">
                            <p><strong>What:</strong> Users can move the due date for Tabby Card payments. The feature is exclusive to subscription holders but requires an additional fee even for subscribers.</p>
                            
                            <p><strong>Mechanic:</strong></p>
                            <ul>
                                <li>Due date can be moved only once per calendar year per user</li>
                                <li>Date adjustment is permitted only within the same calendar month (from current date up to the last day of the month)</li>
                                <li>The feature is chargeable on top of the subscription fee</li>
                            </ul>
                        </div>

                        <h3>Credit Score Reports (Tabby+ Exclusive)</h3>
                        <div class="highlight-section">
                            <p><strong>What:</strong> Internal Tabby score is issued quarterly and comes with a report that shows if there were score drops, what influenced them, if there were increases, what influenced them, user's DBR and an attached credit bureau report.</p>
                            
                            <p><strong>Score Factors:</strong></p>
                            <ul>
                                <li>Only formalized actions are listed as affecting the score (for example overdues and DBR for negatives, early repayments, large lump sum repayments, attached salary certificates and connected Lean for positives if they impacted the score)</li>
                                <li>User actions flagged by the risk model as risky or fraudulent but not formalized are not shown</li>
                                <li>Score is linked to Purchase Power and always displayed for subscribed users</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>



</div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal -->
    <div id="featureModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Feature Details</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Modal content will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // Page constants
        const PAGES = {
            PROMO: 'promo',
            DESCRIPTION: 'description'
        };

        // Embedded CSV data
        const EMBEDDED_CSV_DATA = `Hide,Features,Free Plan,Tabby+ (AED 49/month),Modal Content,Sublines
,Instalment Plans,,,,,
,Split in 4 in partner stores,Free,Free,,Tabby checkout & Tabby Card
,Split in 4 in non-partner stores,Paid,Free (up to 5000 AED/month),Past Benefit: Tabby+ allowed OL and CL transactions to be rolled over at 25% repayment with no fee (no limit). New Design: Free rollover on CL: 25% repayment no cap. Free rollover on OL: 25% repayment capped to AED 5000 per month. Beyond that OL purchases require full repayment to avoid fees. Why: Controls cost risk while preserving value.,Tabby Card
,Split in 6 anywhere,Paid,One "Split in 6" for free at a time,**What:** One "Split in 6" transaction at 0% fee **Mechanic:** Only one Free-6 active at a time. Free-6 resets after repayment (early repayment allowed). **Why:** Drives engagement with long-term financing.,Tabby checkout and in-app & Tabby Card,
,Rewards,,,,,
,Cashback Categories Tabby Card,Not available,Pick 3 categories ‚Üí 5% cashback,,Tabby Card
,Cashback Categories BNPL,Not available,Tabby Card categories applied ‚Üí 5% cashback,,Tabby checkout
X,Sales Events Access,Standard access,Early access,,Tabby Day & Black Friday
X,Exclusive deals,Limited,Full access,,Tabby checkout & Tabby Card
,Advanced debt management tools,,,,,
,Full Snooze,Snooze 1 instalment,Snooze all instalments for the same fee,- **What:** Upgrade snooze ‚Üí Instead of postponing only the next instalment let users snooze **all active instalments of the purchase** for the same fee.**Mechanic:** One active snooze per purchase. Reset/re-eligible after entire purchase is repaid. **Why:** Creates flexible repayment benefit ‚Üí unique selling point for BNPL.,Tabby checkout
,Due Date Changes,Not available,Once a year,What: Allow users to move the due date for Tabby Card payments The feature is exclusive to subscription holders but requires an additional fee even for subscribers Mechanic: Due date can be moved only once per calendar year per user Date adjustment is permitted only within the same calendar month (from current date up to the last day of the month) The feature is chargeable on top of the subscription fee,Tabby Card
X,Credit Score Reports,Not available,Advanced insights,What: Internal Tabby score is updated quarterly and available to the user with a report Report includes factors that caused decreases if any factors that caused increases if any user's DBR and an attached credit bureau report Only formalized actions are shown as influencing the score for example overdues and DBR for negatives and early repayments large lump sum repayments attached salary certificates and connected Lean for positives if they impacted the score User actions considered risky or fraudulent by the risk model but not formalized are not displayed Score is always shown alongside Purchase Power for subscribed usersWhat: Internal Tabby score is issued quarterly and comes with a report that shows if there were score drops what influenced them if there were increases what influenced them user's DBR and an attached credit bureau report Only formalized actions are listed as affecting the score for example overdues and DBR for negatives and early repayments large lump sum repayments attached salary certificates and connected Lean for positives if they impacted the score User actions flagged by the risk model as risky or fraudulent but not formalized are not shown Score is linked to Purchase Power and always displayed for subscribed users,
X,Expense tracking tools,,,,,
X,Expense Tracking,Basic,Custom categories,What: Spending tracking by standard MCC codes and BNPL catalog categories is available on the free plan Tabby+ subscribers can create their own custom categories and track spending within them For example a user can combine taxi food delivery and cleaning into a category like "lack of willpower" and see monthly spending for that category Mechanic: Standard categories only for free users Custom category creation and tracking unlocks with Tabby+ Why: Provides basic insights for all users while allowing advanced personalization of expense analytics for subscribersWhat: Tracking by standard MCC codes and BNPL catalog categories is available on the free plan On Tabby+ users can create custom categories and track spending by them For example grouping taxi food delivery and cleaning services into a "lack of willpower" category and seeing monthly spend on it Mechanic: Standard categories on free plan Custom categories and expense tracking unlocked on Tabby+ Why: Enables basic expense control for free users and personalized analytics for subscribers,Tabby checkout & Tabby Card
,Delights,,,,,
,Card Design,Basic,Exclusive design,,Tabby Card`;

        function parseCSVData(csvText) {
            console.log('Parsing CSV data:', csvText.substring(0, 200) + '...');
            const lines = csvText.split('\n');
            const data = [];
            
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i].trim();
                if (line) {
                    // Parse CSV line properly handling commas within quoted content
                    const columns = parseCSVLine(line);
                    if (columns.length >= 6) {
                        const item = {
                            hide: columns[0].trim(),
                            feature: columns[1].trim(),
                            freePlan: columns[2].trim(),
                            tabbyPlus: columns[3].trim(),
                            modalContent: columns[4].trim(),
                            subline: columns[5].trim()
                        };
                        data.push(item);
                        console.log('Parsed item:', item.feature, 'Hide:', item.hide, 'Modal:', item.modalContent ? 'Yes' : 'No');
                    }
                }
            }
            console.log('Total parsed items:', data.length);
            return data;
        }

        function parseCSVLine(line) {
            const result = [];
            let current = '';
            let inQuotes = false;
            
            for (let i = 0; i < line.length; i++) {
                const char = line[i];
                
                if (char === '"') {
                    inQuotes = !inQuotes;
                } else if (char === ',' && !inQuotes) {
                    result.push(current);
                    current = '';
                } else {
                    current += char;
                }
            }
            
            result.push(current);
            return result;
        }

        function getModalContent(featureName, csvData) {
            console.log('Looking for modal content for:', featureName);
            console.log('Available features:', csvData.map(item => item.feature));
            
            const feature = csvData.find(item => 
                item.feature.toLowerCase().includes(featureName.toLowerCase()) ||
                featureName.toLowerCase().includes(item.feature.toLowerCase())
            );
            
            console.log('Found feature:', feature);
            
            if (feature && feature.modalContent) {
                const parsed = parseModalContent(feature.modalContent);
                console.log('Parsed modal content:', parsed);
                return parsed;
            }
            return null;
        }

        function parseModalContent(content) {
            if (!content || content === '-') return null;
            
            // Parse markdown-like content
            const sections = [];
            const parts = content.split('**');
            
            for (let i = 0; i < parts.length; i += 2) {
                if (i + 1 < parts.length) {
                    const title = parts[i + 1].replace(':', '').trim();
                    const text = parts[i].trim();
                    if (title && text) {
                        sections.push({ title, content: text });
                    }
                }
            }
            
            return sections;
        }

        function initializeHideShow(csvData) {
            console.log('Initializing hide/show functionality...');
            
            const toggleBtn = document.getElementById('hideToggleBtn');
            console.log('Toggle button found:', toggleBtn);
            
            if (!toggleBtn) {
                console.log('Toggle button not found');
                return;
            }
            
            const eyeIcon = toggleBtn.querySelector('.eye-icon');
            console.log('Eye icon found:', eyeIcon);
            
            // Get all rows with hidden-row class (pre-set in HTML)
            const hiddenRows = document.querySelectorAll('.hidden-row');
            let isHidden = true; // Start with rows hidden (default state)
            
            console.log('Found hidden rows:', hiddenRows.length);
            hiddenRows.forEach((row, index) => {
                console.log(`Hidden row ${index}:`, row.textContent.trim().substring(0, 50));
            });
            
            
            // Toggle functionality
            toggleBtn.addEventListener('click', function(e) {
                e.preventDefault();
                console.log('Button clicked!');
                isHidden = !isHidden;
                console.log('Toggle clicked, isHidden:', isHidden);
                
                hiddenRows.forEach((row, index) => {
                    console.log(`Processing row ${index}:`, row.textContent.trim().substring(0, 30));
                    if (isHidden) {
                        row.classList.add('hidden-row');
                        console.log(`Hiding row ${index}`);
                    } else {
                        row.classList.remove('hidden-row');
                        console.log(`Showing row ${index}`);
                    }
                });
                
                // Update icon
                if (isHidden) {
                    eyeIcon.classList.remove('open');
                    eyeIcon.classList.add('closed');
                    eyeIcon.textContent = 'üëÅÔ∏è';
                    console.log('Set to closed eye');
                } else {
                    eyeIcon.classList.remove('closed');
                    eyeIcon.classList.add('open');
                    eyeIcon.textContent = 'üëÅÔ∏è‚Äçüó®Ô∏è';
                    console.log('Set to open eye');
                }
            });
            
            console.log('Hide/show functionality initialized successfully');
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Load CSV data
            let csvData = parseCSVData(EMBEDDED_CSV_DATA);
            
            // Try to fetch latest CSV data
            fetch('./comparison-table-data.csv')
                .then(response => response.text())
                .then(content => {
                    console.log('Successfully loaded CSV data');
                    csvData = parseCSVData(content);
                    initializeHideShow(csvData);
                })
                .catch(error => {
                    console.log('Using embedded CSV data:', error.message);
                    initializeHideShow(csvData);
                });
            
            // Also initialize hide/show immediately with embedded data
            console.log('Initializing hide/show with embedded data...');
            initializeHideShow(csvData);

            // Table functionality (only for promo page)
            const table = document.getElementById('comparisonTable');
            console.log('Table found:', table);
            if (table) {
                const headers = document.querySelectorAll('.comparison-table th');
                const modal = document.getElementById('featureModal');
                const modalTitle = document.getElementById('modalTitle');
                const modalBody = document.getElementById('modalBody');
                const closeBtn = document.querySelector('.close');
                
                console.log('Modal elements:', { modal, modalTitle, modalBody, closeBtn });

                // Column selection functionality
                headers.forEach((header, index) => {
                    if (index > 0) { // Skip the Features column
                        header.addEventListener('click', function() {
                            // Remove existing classes
                            table.classList.remove('free-selected', 'plus-selected');
                            
                            // Add appropriate class
                            if (index === 1) {
                                table.classList.add('free-selected');
                            } else if (index === 2) {
                                table.classList.add('plus-selected');
                            }
                        });
                    }
                });

                // Modal functionality
                const cells = document.querySelectorAll('.comparison-table td');
                console.log('Cells found:', cells.length);
                
                cells.forEach((cell, index) => {
                    cell.style.cursor = 'pointer';
                    const cellText = cell.textContent.trim();
                    
                    cell.addEventListener('click', function(e) {
                        e.stopPropagation();
                        console.log('Cell clicked:', cellText);
                        
                        // Get the feature name from the first column of the same row
                        const row = cell.closest('tr');
                        const featureNameCell = row.querySelector('.feature-name');
                        const featureName = featureNameCell ? featureNameCell.textContent.trim() : '';
                        console.log('Feature name:', featureName);
                        
                        // Position modal so arrow points to the clicked cell
                        const rect = cell.getBoundingClientRect();
                        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                        const scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;
                        
                        // Calculate modal position so the arrow points to the cell
                        const modalWidth = 800; // Same as CSS width
                        const arrowOffset = 20; // Distance from modal edge to arrow
                        const modalLeft = rect.left - modalWidth - arrowOffset;
                        
                        // Ensure modal doesn't go off screen
                        const finalLeft = Math.max(10, Math.min(modalLeft, window.innerWidth - modalWidth - 10));
                        
                        // Calculate arrow position relative to the cell
                        const cellCenterY = rect.top + (rect.height / 2);
                        const modalTop = cellCenterY - 150; // Start with modal top at cell center minus half modal height
                        
                        // Position modal
                        modal.style.position = 'absolute';
                        modal.style.left = (finalLeft + scrollLeft) + 'px';
                        modal.style.top = (modalTop + scrollTop) + 'px';
                        modal.style.display = 'block';
                        
                        // Calculate arrow position to point at the cell
                        const modalRect = modal.getBoundingClientRect();
                        const arrowTop = cellCenterY - modalRect.top;
                        
                        // Set arrow position dynamically
                        const modalContent = modal.querySelector('.modal-content');
                        modalContent.style.setProperty('--arrow-top', arrowTop + 'px');
                        
                        // Get modal content from CSV data
                        console.log('Getting modal content for:', featureName);
                        console.log('CSV data available:', csvData ? csvData.length : 'No CSV data');
                        const modalSections = getModalContent(featureName, csvData);
                        console.log('Modal sections:', modalSections);
                        
                        modalTitle.textContent = cellText;
                        
                        if (modalSections && modalSections.length > 0) {
                            let modalHTML = '';
                            modalSections.forEach(section => {
                                modalHTML += `
                                    <div class="modal-section">
                                        <h4 class="section-title">${section.title}</h4>
                                        <p class="section-content">${section.content}</p>
                                    </div>
                                `;
                            });
                            modalBody.innerHTML = modalHTML;
                            console.log('Modal HTML set:', modalHTML);
                        } else {
                            // Fallback for cells without modal content
                            modalBody.innerHTML = `
                                <div class="modal-section">
                                    <h4 class="section-title">Feature Information</h4>
                                    <p class="section-content">This feature is part of the Tabby+ subscription plan. Click on other cells with pulsing animations to see detailed information about specific features.</p>
                                </div>
                            `;
                            console.log('Using fallback modal content');
                        }
                    });
                });

                // Close modal functionality
                closeBtn.addEventListener('click', function() {
                    modal.style.display = 'none';
                });

                // Close modal when clicking outside
                window.addEventListener('click', function(event) {
                    if (event.target === modal) {
                        modal.style.display = 'none';
                    }
                });

                // Close modal with Escape key
                document.addEventListener('keydown', function(event) {
                    if (event.key === 'Escape') {
                        modal.style.display = 'none';
                    }
                });
            }

            // Tab navigation
            const navLinks = document.querySelectorAll('.nav-link');
            const pages = document.querySelectorAll('.page');

            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetPage = link.getAttribute('data-page');
                    
                    // Remove active class from all links and pages
                    navLinks.forEach(l => l.classList.remove('active'));
                    pages.forEach(page => page.classList.remove('active'));
                    
                    // Add active class to clicked link and corresponding page
                    link.classList.add('active');
                    const targetPageElement = document.getElementById(targetPage + '-page');
                    if (targetPageElement) {
                        targetPageElement.classList.add('active');
                    }
                    
                    // Load content from text file when switching to description page
                    if (targetPage === 'description') {
                        loadWikiContent();
                    }
                });
            });
            
            // Load wiki content on page load if description page is active
            const activePage = document.querySelector('.page.active');
            if (activePage && activePage.id === 'description-page') {
                loadWikiContent();
            }
        });
        
        function loadWikiContent() {
            console.log('Loading wiki content...');
            fetch('Tabby Plans Description.txt')
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response.text();
                })
                .then(content => {
                    console.log('Content loaded, parsing...');
                    const wikiContainer = document.querySelector('.wiki-content');
                    if (wikiContainer) {
                        wikiContainer.innerHTML = parseTextToHTML(content);
                        console.log('Wiki content updated successfully');
                    } else {
                        console.error('Wiki container not found');
                    }
                })
                .catch(error => {
                    console.error('Error loading wiki content:', error);
                    // Fallback to existing content if file can't be loaded
                });
        }
        
        function parseTextToHTML(text) {
            const lines = text.split('\n');
            let html = '';
            let inPlanSection = false;
            let currentPlan = '';
            
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i].trim();
                
                if (line === 'TABBY PLANS COMPARISON') {
                    html += '<h1>Tabby Plans Comparison</h1>';
                } else if (line === 'OVERVIEW') {
                    html += '<h2>Overview</h2>';
                } else if (line === '**FREE PLAN**') {
                    html += '<div class="plan-comparison"><div class="plan-box free-plan"><h3 class="plan-title free">Free Plan</h3>';
                    inPlanSection = true;
                    currentPlan = 'free';
                } else if (line === '**TABBY+ PLAN (AED 49/MONTH)**') {
                    html += '</div><div class="plan-box plus-plan"><h3 class="plan-title plus">Tabby+ Plan (AED 49/month)</h3>';
                    currentPlan = 'plus';
                } else if (line === '**KEY DIFFERENCES SUMMARY**') {
                    html += '</div></div><h2>Key Differences Summary</h2>';
                    inPlanSection = false;
                } else if (line === '**FEATURE DETAILS**') {
                    html += '<h2>Feature Details</h2>';
                } else if (line === 'INSTALMENT PLANS' || line === 'REWARDS' || line === 'ADVANCED DEBT MANAGEMENT TOOLS' || line === 'DELIGHTS') {
                    if (inPlanSection) {
                        html += `<h4>${line}</h4>`;
                    } else {
                        html += `<h3>${line}</h3>`;
                    }
                } else if (line.startsWith('‚úì') || line.startsWith('‚úó')) {
                    const isAvailable = line.startsWith('‚úì');
                    const featureText = line.substring(1).trim();
                    const spanClass = isAvailable ? 'feature-available' : 'feature-unavailable';
                    const symbol = isAvailable ? '‚úì' : '‚úó';
                    html += `<div class="feature-item"><span class="${spanClass}">${symbol}</span> ${featureText}</div>`;
                } else if (line.startsWith('‚Ä¢')) {
                    html += `<li>${line.substring(1).trim()}</li>`;
                } else if (line.startsWith('FREE PLAN LIMITATIONS:') || line.startsWith('TABBY+ ADVANTAGES:')) {
                    const title = line.replace(':', '');
                    html += `<div class="highlight-section"><h3>${title}</h3><ul>`;
                } else if (line.startsWith('SPLIT IN') || line.startsWith('FULL SNOOZE') || line.startsWith('DUE DATE') || line.startsWith('CREDIT SCORE')) {
                    html += `<h3>${line}</h3><div class="highlight-section">`;
                } else if (line.startsWith('Past Benefit:') || line.startsWith('New Design:') || line.startsWith('What:') || line.startsWith('Mechanic:') || line.startsWith('Why:') || line.startsWith('Score Factors:')) {
                    const parts = line.split(':');
                    if (parts.length > 1) {
                        html += `<p><strong>${parts[0]}:</strong> ${parts.slice(1).join(':').trim()}</p>`;
                    }
                } else if (line && !line.startsWith('=') && !line.startsWith('-') && line !== '') {
                    // Regular paragraph text
                    if (line.includes('Tabby offers two distinct plans')) {
                        html += `<p>${line}</p>`;
                    } else if (!line.startsWith('**') && !line.startsWith('TABBY') && !line.startsWith('OVERVIEW') && !line.startsWith('KEY') && !line.startsWith('FEATURE')) {
                        html += `<p>${line}</p>`;
                    }
                }
            }
            
            // Close any open tags
            if (inPlanSection) {
                html += '</div></div>';
            }
            
            return html;
        }
    </script>
</body>
</html>